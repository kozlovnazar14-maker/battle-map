<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Оперативна карта | Редактор</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #1a1a1a; }
        #map { height: 100vh; width: 100%; }
        .back-btn { 
            position: absolute; top: 10px; right: 50px; z-index: 1000; 
            background: rgba(0,0,0,0.8); color: white; padding: 10px 15px; 
            text-decoration: none; border-radius: 5px; border: 1px solid #e74c3c; 
            font-family: Arial; font-weight: bold;
        }
    </style>
</head>
<body>

    <a href="index.html" class="back-btn">← В МЕНЮ</a>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    
    <script>
        // 1. Налаштування карти та супутника
        var map = L.map('map').setView([48.37, 31.16], 6);
        
        var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}').addTo(map);
        var labels = L.tileLayer('https://mt1.google.com/vt/lyrs=h&x={x}&y={y}&z={z}').addTo(map);

        // 2. Створюємо шар, де будуть зберігатися твої малюнки
        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);

        // 3. Додаємо панель інструментів малювання
        var drawControl = new L.Control.Draw({
            edit: {
                featureGroup: drawnItems
            },
            draw: {
                polygon: {
                    allowIntersection: false,
                    showArea: true,
                    shapeOptions: { color: '#ff0000', fillOpacity: 0.5 } // Колір полігонів за замовчуванням
                },
                polyline: { shapeOptions: { color: '#0000ff' } }, // Лінії (укріплення)
                rectangle: false,
                circle: true,
                marker: true,
                circlemarker: false
            }
        });
        map.addControl(drawControl);

        // 4. Логіка появи об'єкта на карті після малювання
        map.on(L.Draw.Event.CREATED, function (event) {
            var layer = event.layer;
            drawnItems.addLayer(layer);
            
            // Виводимо координати в консоль (для тебе, як розробника)
            if (event.layerType === 'polygon') {
                console.log("Координати полігону:", layer.getLatLngs());
            }
        });

    </script>
</body>
</html>
