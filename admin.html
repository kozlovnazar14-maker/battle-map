<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Адмін-панель Карти</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #1a1a1a; font-family: Arial; }
        #map { height: 100vh; width: 100%; }
        .admin-panel { 
            position: absolute; top: 10px; left: 50px; z-index: 1000; 
            background: rgba(0,0,0,0.9); color: white; padding: 15px; 
            border-radius: 8px; border: 2px solid #e74c3c; width: 250px;
        }
        button { background: #e74c3c; color: white; border: none; padding: 10px; width: 100%; cursor: pointer; border-radius: 4px; font-weight: bold; }
        textarea { width: 100%; height: 100px; margin-top: 10px; background: #333; color: #fff; border: 1px solid #555; font-size: 10px; }
    </style>
</head>
<body>

    <div class="admin-panel">
        <h3>Панель адміна</h3>
        <p><small>1. Намалюй зону або лінію<br>2. Натисни кнопку нижче</small></p>
        <button onclick="saveData()">ОТРИМАТИ КОД</button>
        <textarea id="output" readonly placeholder="Тут з'явиться код..."></textarea>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <script>
        var map = L.map('map').setView([48.37, 31.16], 6);
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}').addTo(map);
        L.tileLayer('https://mt1.google.com/vt/lyrs=h&x={x}&y={y}&z={z}').addTo(map);

        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);

        var drawControl = new L.Control.Draw({
            edit: { featureGroup: drawnItems },
            draw: {
                polygon: { shapeOptions: { color: '#ff0000', fillOpacity: 0.5 } },
                polyline: { shapeOptions: { color: '#0000ff', weight: 5 } },
                marker: true, circle: false, rectangle: false
            }
        });
        map.addControl(drawControl);

        map.on(L.Draw.Event.CREATED, function (e) {
            drawnItems.addLayer(e.layer);
        });

        function saveData() {
            var data = drawnItems.toGeoJSON();
            document.getElementById('output').value = JSON.stringify(data);
            alert("Код згенеровано в текстове поле! Скопіюй його.");
        }
    </script>
</body>
</html>
